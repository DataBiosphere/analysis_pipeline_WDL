# Checker workflows (ld-pruning-checker.wdl, vcf-to-gds-checker.wdl)
These scripts run pipelines on a known set of inputs, and validates them against expected outputs with a quick md5sum check. On Terra, both inputs and outputs are pulled from the UCSC-owned topmed_workflow_testing bucket.

These workflows are not simply a copy of the check_gds/check_merged_gds steps found in vcf-to-gds and ld-pruning respectively. Instead, it performs a separate validation check using md5 sums. Speaking of which, because the test inputs are known to not take very long in check_gds, it is enabled *by default.* If you are replacing these files with your own sets of inputs and outputs, and that set is non-downsampled, modern TOPMed data, you may wish to consider skipping this step.

**If relying on the truth files located in topmed_workflow_testing, make sure to run this on the full array of input VCF (vcf-to-gds-checker) or GDS (ld-pruning-checker) files, except chrX.** If you do not run this on the full array of provided files, the resulting outputs will have unexpected variant IDs (vcf-to-gds) or be missing certain variants (ld-pruning), resulting in an md5sum mismatch. That does not mean the gds files are invalid, it just means their IDs are not exactly the same as they would be if you had generated them all together.

ld-pruning is hardcoded to fail on chrX. As such chrX has been removed from the checker pipeline entirely, but a truth file for vcf-to-gds can be found in the appropriate Google Cloud bucket should you wish to do a manual comparison.

Due to Cromwell limitations, workflows do not always execute in the order that tasks are written in a WDL file. Similarly, scattered tasks tend to execute their components in a somewhat random order; something like shard-6 --> shard-10 --> shard-20 --> shard-1 is possible if you have your job concurrency set to 1. For this reason, your pipeline may error out later than you would expect. Be prepared for the pipeline to run its full course even if you are expecting an error in one of the first md5sum checks!